/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@microsoft/signalr@8.0.7/dist/cjs/XhrHttpClient.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.XhrHttpClient=void 0;const Errors_1=require("./Errors"),HttpClient_1=require("./HttpClient"),ILogger_1=require("./ILogger"),Utils_1=require("./Utils");class XhrHttpClient extends HttpClient_1.HttpClient{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Errors_1.AbortError):e.method?e.url?new Promise(((t,r)=>{const o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.withCredentials=void 0===e.withCredentials||e.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===e.content&&(e.content=void 0),e.content&&((0,Utils_1.isArrayBuffer)(e.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const s=e.headers;s&&Object.keys(s).forEach((e=>{o.setRequestHeader(e,s[e])})),e.responseType&&(o.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{o.abort(),r(new Errors_1.AbortError)}),e.timeout&&(o.timeout=e.timeout),o.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),o.status>=200&&o.status<300?t(new HttpClient_1.HttpResponse(o.status,o.statusText,o.response||o.responseText)):r(new Errors_1.HttpError(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(ILogger_1.LogLevel.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),r(new Errors_1.HttpError(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(ILogger_1.LogLevel.Warning,"Timeout from HTTP request."),r(new Errors_1.TimeoutError)},o.send(e.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}exports.XhrHttpClient=XhrHttpClient;
//# sourceMappingURL=/sm/82b6509c713afb6b0d40b983acdf1afc573fc8fe939de6e0b2570f767eb02fc5.map