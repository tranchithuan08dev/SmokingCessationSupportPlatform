/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@microsoft/signalr@8.0.7/dist/cjs/HandshakeProtocol.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HandshakeProtocol=void 0;const TextMessageFormat_1=require("./TextMessageFormat"),Utils_1=require("./Utils");class HandshakeProtocol{writeHandshakeRequest(e){return TextMessageFormat_1.TextMessageFormat.write(JSON.stringify(e))}parseHandshakeResponse(e){let r,s;if((0,Utils_1.isArrayBuffer)(e)){const t=new Uint8Array(e),o=t.indexOf(TextMessageFormat_1.TextMessageFormat.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");const a=o+1;r=String.fromCharCode.apply(null,Array.prototype.slice.call(t.slice(0,a))),s=t.byteLength>a?t.slice(a).buffer:null}else{const t=e,o=t.indexOf(TextMessageFormat_1.TextMessageFormat.RecordSeparator);if(-1===o)throw new Error("Message is incomplete.");const a=o+1;r=t.substring(0,a),s=t.length>a?t.substring(a):null}const t=TextMessageFormat_1.TextMessageFormat.parse(r),o=JSON.parse(t[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[s,o]}}exports.HandshakeProtocol=HandshakeProtocol;
//# sourceMappingURL=/sm/0d5d8e20a585f04dc27e0917186a24edc65ad6dd3aa496b754f28b1201ac5d85.map