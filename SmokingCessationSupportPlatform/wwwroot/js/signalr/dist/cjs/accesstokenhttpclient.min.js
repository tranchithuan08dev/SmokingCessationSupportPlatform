/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@microsoft/signalr@8.0.7/dist/cjs/AccessTokenHttpClient.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AccessTokenHttpClient=void 0;const HeaderNames_1=require("./HeaderNames"),HttpClient_1=require("./HttpClient");class AccessTokenHttpClient extends HttpClient_1.HttpClient{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const s=await this._innerClient.send(e);return t&&401===s.statusCode&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):s}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[HeaderNames_1.HeaderNames.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[HeaderNames_1.HeaderNames.Authorization]&&delete e.headers[HeaderNames_1.HeaderNames.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}exports.AccessTokenHttpClient=AccessTokenHttpClient;
//# sourceMappingURL=/sm/d861dc07a5e8e372e4c27bfb0b813f92682fa9bc1f7c907e59585ec6583bc7b2.map